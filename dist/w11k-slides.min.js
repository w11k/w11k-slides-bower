/**
 * w11k-slides
 *
 * @version v0.12.0
 * @link https://github.com/w11k/w11k-slides
 * @license MIT
 */
!function(){"use strict";var e=angular.module("w11k.slides",[]);e.constant("slidesConfig",{slides:[],slideTemplatePrefix:"slides/content/",slideTemplateSuffix:".html",masters:{},footer:{templateUrl:"footer/footer.html",left:"",middle:"",right:"$index + 1"}})}();
!function(){"use strict";function n(n){return{restrict:"A",link:function(t,e,i){function o(n){n?c.style.display=l:(l=c.style.display,c.style.display="none")}var l,c=e[0];t.$on(i.w11kEventToggle,function(n,t){o(t)}),n.$emit(i.w11kEventToggle+"-current",function(n){o(n)})}}}n.$inject=["$rootScope"];var t=angular.module("w11k.slides");t.directive("w11kEventToggle",n)}();
!function(){"use strict";function n(n){n.init()}function e(n){var e={de:{de:!0,en:!1,name:"de",next:"enOnly"},en:{de:!1,en:!0,name:"en",next:"de+en"},"de+en":{de:!0,en:!0,name:"de+en",next:"de"}},t=e.de;this.toggle=function(){this.set(t.next)}.bind(this),this.set=function(i){t=e[i],n.$broadcast("lang-de",t.de),n.$broadcast("lang-en",t.en)}.bind(this),this.get=function(){return t.name}.bind(this),this.init=function(){n.$on("lang-de-current",function(n,e){e(t.de)}),n.$on("lang-en-current",function(n,e){e(t.en)})}.bind(this)}n.$inject=["Language"],e.$inject=["$rootScope"];var t=angular.module("w11k.slides");t.run(n),t.service("Language",e)}();
!function(){"use strict";function s(s){var t={js:{js:!0,ts:!1,name:"js",next:"tsOnly"},ts:{js:!1,ts:!0,name:"ts",next:"js+ts"},"js+ts":{js:!0,ts:!0,name:"js+ts",next:"js"}},n=t.js;s.$on("src-js-current",function(s,t){t(n.js)}),s.$on("src-ts-current",function(s,t){t(n.ts)}),this.toggle=function(){n=t[n.next],s.$broadcast("src-js",n.js),s.$broadcast("src-ts",n.ts)}.bind(this),this.set=function(c){n=t[c],s.$broadcast("src-js",n.js),s.$broadcast("src-ts",n.ts)}.bind(this),this.get=function(){return n.name}.bind(this)}s.$inject=["$rootScope"];var t=angular.module("w11k.slides");t.service("SourceSnippets",s)}();
!function(){"use strict";function e(e){return{restrict:"EA",templateUrl:e.footer.templateUrl||"footer/footer.tpl.html",replace:!0,link:function(t,r,o){function l(e,r){var o=t.$eval(r);angular.isDefined(o)&&(e.innerHTML=o)}var i=r[0].querySelector(".footer-left"),f=r[0].querySelector(".footer-middle"),n=r[0].querySelector(".footer-right");l(i,o.left||e.footer.left),l(f,o.middle||e.footer.middle),l(n,o.right||e.footer.right)}}}e.$inject=["slidesConfig"];var t=angular.module("w11k.slides");t.directive("w11kFooter",e)}();
!function(){"use strict";function e(e){var t=function(e){return angular.isUndefined(e)?void 0:e.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},n='<div class="w11k-pretty-print"><pre class="prettyprint linenums"></pre></div>',r='<div class="title"></div>';return{restrict:"A",terminal:!0,compile:function(i,l){if(angular.isFunction(e.prettyPrintOne)){var a=i.html(),c=t(a),u=e.prettyPrintOne(c,l.lang,!0),p=angular.element(n),s=p.find("pre");return s.html(u),i.replaceWith(p),function(e,t,n){n.$observe("title",function(e){if(void 0!==e&&""!==e){var n=angular.element(r);n.html(e),t.prepend(n)}})}}}}}e.$inject=["$window"];var t=angular.module("w11k.slides");t.directive("w11kPrettyPrint",e)}();
!function(){"use strict";function e(e){var n=0;this.increment=function(){this.counter++},this.decrement=function(){this.counter--},e.onbeforeunload=function(e){if(n>0){var i="Es wurde mindestens ein Beispiel geöffnet. Wenn die Seite neu geladen wird, müssen beim erneuten Öffnen auch die Beispiele neu geladen werden.";return e.returnValue=i,i}return void e.preventDefault()}}e.$inject=["$window"];var n=angular.module("w11k.slides");n.service("UnloadConfirm",e)}();
!function(){"use strict";function e(e,n){return{restrict:"A",link:function(t,r,i){var l;r.bind("click",function(t){var o=void 0===l||null===l||l.closed,a=void 0!==i.href&&null!==i.href&&void 0!==i.target&&null!==i.target,c="true"===i.w11kOpenOnce;o&&a&&c?(r.removeClass("example-shown"),n.increment(),l=e.open(i.href,i.target),t.preventDefault()):o===!1&&c&&(l.focus(),r.addClass("example-shown"),t.preventDefault())})}}}e.$inject=["$window","UnloadConfirm"];var n=angular.module("w11k.slides");n.directive("w11kOpenOnce",e)}();
!function(){"use strict";function e(e,t,i){function n(){angular.isDefined(r)&&(r.active=!1),r=o[0],r.active=!0}function a(){var t=e.slideTemplatePrefix||"slides/content/",i=e.slideTemplateSuffix||".html";o=e.slides.map(function(e){var n={name:e,template:t+e+i,active:!1};return n.activate=function(){r.active=!1,r=this,n.active=!0},n});for(var n=0;n<o.length;n++){var a,l=o[n];a=n>0?o[n-1]:o[o.length-1];var c;c=n+1<o.length?o[n+1]:o[0],l.previous=a,l.next=c,s[l.name]=l}}var r,o,s={};i.$on("$locationChangeSuccess",function(){var e=t.path();"/"===e.substring(0,1)&&(e=e.substring(1,e.length));var i=s[e];angular.isDefined(i)&&i.activate()}),a(),n(),this.getActiveSlide=function(){return r},this.getSlides=function(){return o},this.navigateTo=function(e){t.path(e)},this.navigateToFirst=function(){t.path(o[0].name)},this.navigateToLast=function(){t.path(o[o.length-1].name)},this.navigateToOverview=function(){t.path(o[1].name)},this.navigateToNext=function(){var e=this.getActiveSlide().next;angular.isDefined(e)&&this.navigateTo(e.name)}.bind(this),this.navigateToPrevious=function(){var e=this.getActiveSlide().previous;angular.isDefined(e)&&this.navigateTo(e.name)}.bind(this)}function t(e){this.slides=e.getSlides()}function i(e){var t=function(e){var t=e.lastChild;if(t)do e.removeChild(t),t=e.lastChild;while(t)};return{templateUrl:function(t,i){var n=i.w11kSlideMaster||i.master,a=e.masters[n];if(angular.isUndefined(a))throw new Error('No Mater-Slide found for "'+n+'". Please configure "slidesConfig" properly.');return a},restrict:"EA",replace:!0,transclude:!0,link:function(e,i,n,a,r){var o;r(function(e,n){for(var a=0;a<e.length;a++){var r=e[a];if(void 0!==r&&angular.isFunction(r.getAttribute)){var s=r.getAttribute("w11k-slide-part-source");if(void 0!==s&&null!==s){var l='[w11k-slide-part-target="'+s+'"]',c=i[0].querySelector(l);null!==c&&(t(c),c.appendChild(r,c),c.removeAttribute("w11k-slide-part-target"))}}}o=n}),e.$on("$destroy",function(){o.$destroy()})}}}function n(e,t,i,n,a){return{restrict:"EA",templateUrl:n.directiveTemplateUrl||"slides/slides.html",replace:!0,link:function(r,o){function s(){"export"===g?g="screen":"screen"===g&&(g="export"),l(g),angular.isDefined(e.localStorage)&&(e.localStorage[u]=g)}function l(e){"export"===e?(v.classList.remove("screen"),v.classList.add("export")):"screen"===e&&(v.classList.remove("export"),v.classList.add("screen"))}function c(){v.querySelector("div.overlay").classList.toggle("active")}function d(t){var n,a;39===t.keyCode||34===t.keyCode?(n=i.navigateToNext,a="navigate"):37===t.keyCode||33===t.keyCode?(n=i.navigateToPrevious,a="navigate"):36===t.keyCode?(n=i.navigateToFirst,a="navigate"):35===t.keyCode?(n=i.navigateToLast,a="navigate"):79===t.keyCode?(n=i.navigateToOverview,a="navigate"):69===t.keyCode?n=s:(80===t.keyCode||190===t.keyCode)&&(n=c),n&&r.$apply(function(){n(),"navigate"===a&&e.scrollTo(0,0)})}var v=o[0],u="w11k-slides.mode",g="export";angular.isDefined(e.localStorage)&&angular.isDefined(e.localStorage[u])&&(g=e.localStorage[u],l(g)),t.bind("keydown",function(e){if(!(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){var t=e.target.tagName;if("INPUT"!==t&&"TEXTAREA"!==t&&"true"!==e.target.contentEditable)if(n.shortcuts){var i=n.shortcuts[e.keyCode];angular.isFunction(i)||angular.isArray(i)?a.invoke(i,{$event:e}):d(e)}else d(e)}})}}}e.$inject=["slidesConfig","$location","$rootScope"],t.$inject=["SlidesService"],i.$inject=["slidesConfig"],n.$inject=["$window","$document","SlidesService","slidesConfig","$injector"];var a=angular.module("w11k.slides");a.service("SlidesService",e),a.controller("SlidesCtrl",t),a.directive("w11kSlideMaster",i),a.directive("w11kSlides",n)}();
!function(){"use strict";function s(s){s.shortcuts=s.shortcuts||{},s.shortcuts[76]=["SourceSnippets",function(s){s.toggle()}]}function t(s){s.init()}function n(s){var t={jsOnly:{js:!0,ts:!1,next:"tsOnly"},tsOnly:{js:!1,ts:!0,next:"jsAndTs"},jsAndTs:{js:!0,ts:!0,next:"jsOnly"}},n=t.jsOnly;s.$on("src-js-current",function(s,t){t(n.js)}),s.$on("src-ts-current",function(s,t){t(n.ts)}),this.toggle=function(){n=t[n.next],s.$broadcast("src-js",n.js),s.$broadcast("src-ts",n.ts)},this.init=function(){}}s.$inject=["slidesConfig"],t.$inject=["SourceSnippets"],n.$inject=["$rootScope"];var c=angular.module("w11k.slides");c.config(s),c.run(t),c.service("SourceSnippets",n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIncxMWstc2xpZGVzLm1pbi5qcyIsIncxMWstc2xpZGVzLmpzIiwiZXZlbnQtdG9nZ2xlL2V2ZW50LXRvZ2dsZS5qcyIsImV2ZW50LXRvZ2dsZS9sYW5ndWFnZS5qcyIsImV2ZW50LXRvZ2dsZS9zb3VyY2Utc25pcHBldHMuanMiLCJmb290ZXIvZm9vdGVyLmpzIiwicHJldHR5cHJpbnQvcHJldHR5cHJpbnQuanMiLCJvcGVuLW9uY2UvY29uZmlybS11bmxvYWQuanMiLCJvcGVuLW9uY2Uvb3Blbi1vbmNlLmpzIiwic2xpZGVzL3NsaWRlcy5qcyIsInNvdXJjZS1zbmlwcGV0cy9zb3VyY2Utc25pcHBldHMuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiYW5ndWxhciIsImNvbnN0YW50Iiwic2xpZGVzIiwic2xpZGVUZW1wbGF0ZVByZWZpeCIsInNsaWRlVGVtcGxhdGVTdWZmaXgiLCJtYXN0ZXJzIiwiZm9vdGVyIiwidGVtcGxhdGVVcmwiLCJsZWZ0IiwibWlkZGxlIiwicmlnaHQiLCJ3MTFrRXZlbnRUb2dnbGUiLCIkcm9vdFNjb3BlIiwicmVzdHJpY3QiLCJsaW5rIiwic2NvcGUiLCJqcUVsZW1lbnQiLCJhdHRycyIsInRvZ2dsZSIsInZpc2libGUiLCJlbGVtZW50Iiwic3R5bGUiLCJkaXNwbGF5Iiwib3JpZ2luYWxEaXNwbGF5IiwiJG9uIiwiZXZlbnQiLCIkZW1pdCIsIiRpbmplY3QiLCJkaXJlY3RpdmUiLCJpbml0TGFuZ3VhZ2UiLCJMYW5ndWFnZSIsImluaXQiLCJzdGF0ZXMiLCJkZSIsImVuIiwibmFtZSIsIm5leHQiLCJkZStlbiIsImN1cnJlbnRTdGF0ZSIsInRoaXMiLCJzZXQiLCJiaW5kIiwic3RhdGUiLCIkYnJvYWRjYXN0IiwiZ2V0IiwiY2FsbGJhY2siLCJydW4iLCJzZXJ2aWNlIiwiU291cmNlU25pcHBldHMiLCJqcyIsInRzIiwianMrdHMiLCJ3MTFrRm9vdGVyIiwic2xpZGVzQ29uZmlnIiwicmVwbGFjZSIsInNldENvbnRlbnQiLCJleHByZXNzaW9uIiwiY29udGVudCIsIiRldmFsIiwiaXNEZWZpbmVkIiwiaW5uZXJIVE1MIiwicXVlcnlTZWxlY3RvciIsIncxMWtQcmV0dHlQcmludCIsIiR3aW5kb3ciLCJlc2NhcGVIVE1MIiwiaHRtbCIsImlzVW5kZWZpbmVkIiwiY29udGFpbmVyVGVtcGxhdGUiLCJ0aXRsZVRlbXBsYXRlIiwidGVybWluYWwiLCJjb21waWxlIiwidEVsZW1lbnQiLCJ0QXR0cnMiLCJpc0Z1bmN0aW9uIiwicHJldHR5UHJpbnRPbmUiLCJlc2NhcGVkSHRtbCIsInByZXR0aWZpZWRIdG1sIiwibGFuZyIsImNvbnRhaW5lciIsInByZUVsZW1lbnQiLCJmaW5kIiwicmVwbGFjZVdpdGgiLCIkb2JzZXJ2ZSIsInRpdGxlVGV4dCIsInVuZGVmaW5lZCIsInRpdGxlRWxlbWVudCIsInByZXBlbmQiLCJVbmxvYWRDb25maXJtIiwiY291bnRlciIsImluY3JlbWVudCIsImRlY3JlbWVudCIsIm9uYmVmb3JldW5sb2FkIiwiaGludCIsInJldHVyblZhbHVlIiwicHJldmVudERlZmF1bHQiLCJ3MTFrT3Blbk9uY2UiLCJuYW1lZFdpbmRvdyIsIm5vTmFtZWRXaW5kb3dPcGVuIiwiY2xvc2VkIiwibGlua0F0dHJTZXQiLCJocmVmIiwidGFyZ2V0Iiwib3Blbk9uY2VTZXQiLCJyZW1vdmVDbGFzcyIsIm9wZW4iLCJmb2N1cyIsImFkZENsYXNzIiwiU2xpZGVzU2VydmljZSIsIiRsb2NhdGlvbiIsImFjdGl2YXRlRmlyc3RTbGlkZSIsImFjdGl2ZVNsaWRlIiwiYWN0aXZlIiwibWFwU2xpZGVzQ29uZmlnIiwicHJlZml4Iiwic3VmZml4IiwibWFwIiwic2xpZGUiLCJzbGlkZU9iamVjdCIsInRlbXBsYXRlIiwiYWN0aXZhdGUiLCJpIiwibGVuZ3RoIiwicHJldmlvdXMiLCJzbGlkZXNNYXAiLCJzbGlkZU5hbWUiLCJwYXRoIiwic3Vic3RyaW5nIiwiZ2V0QWN0aXZlU2xpZGUiLCJnZXRTbGlkZXMiLCJuYXZpZ2F0ZVRvIiwibmF2aWdhdGVUb0ZpcnN0IiwibmF2aWdhdGVUb0xhc3QiLCJuYXZpZ2F0ZVRvT3ZlcnZpZXciLCJuYXZpZ2F0ZVRvTmV4dCIsIm5hdmlnYXRlVG9QcmV2aW91cyIsIlNsaWRlc0N0cmwiLCJ3MTFrU2xpZGVNYXN0ZXJEaXJlY3RpdmUiLCJyZW1vdmVDaGlsZHJlbiIsIm5vZGUiLCJsYXN0IiwibGFzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJrZXkiLCJ3MTFrU2xpZGVNYXN0ZXIiLCJtYXN0ZXIiLCJFcnJvciIsInRyYW5zY2x1ZGUiLCJpRWxlbWVudCIsImlBdHRycyIsImN0cmwiLCJ0cmFuc2NsdXNpb25TY29wZSIsImNsb25lIiwicGFydCIsImdldEF0dHJpYnV0ZSIsInBhcnROYW1lIiwic2VsZWN0b3IiLCJhcHBlbmRDaGlsZCIsInJlbW92ZUF0dHJpYnV0ZSIsIiRkZXN0cm95IiwidzExa1NsaWRlc0RpcmVjdGl2ZSIsIiRkb2N1bWVudCIsIiRpbmplY3RvciIsImRpcmVjdGl2ZVRlbXBsYXRlVXJsIiwidG9nZ2xlTW9kZSIsIm1vZGUiLCJzZXRNb2RlIiwibG9jYWxTdG9yYWdlIiwibG9jYWxTdG9yYWdlTW9kZUtleSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInRvZ2dsZU92ZXJsYXkiLCJydW5EZWZhdWx0QWN0aW9uIiwiYWN0aW9uIiwiYWN0aW9uVHlwZSIsImtleUNvZGUiLCIkYXBwbHkiLCJzY3JvbGxUbyIsImFsdEtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiLCJ0YWdOYW1lIiwiY29udGVudEVkaXRhYmxlIiwic2hvcnRjdXRzIiwiY3VzdG9tU2hvcnRjdXQiLCJpc0FycmF5IiwiaW52b2tlIiwiJGV2ZW50IiwiY29udHJvbGxlciIsImNvbmZpZ3VyZVNob3J0Y3V0cyIsImluaXRTbmlwcGV0cyIsImpzT25seSIsInRzT25seSIsImpzQW5kVHMiLCJjb25maWciXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0NQ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QW1CekksR0FDMUJBLEVBQWFtSSxVQUFZbkksRUFBYW1JLGNBRXRDbkksRUFBYW1JLFVBQVUsS0FBUyxpQkFBa0IsU0FBVXhJLEdBQzFEQSxFQUFlOUIsV0FNbkIsUUFBUzZLLEdBQWEvSSxHQUVwQkEsRUFBZWpCLE9BS2pCLFFBQVNpQixHQUFlcEMsR0FDdEIsR0FBSW9CLElBQ0ZnSyxRQUNFL0ksSUFBSSxFQUNKQyxJQUFJLEVBQ0pkLEtBQU0sVUFFUjZKLFFBQ0VoSixJQUFJLEVBQ0pDLElBQUksRUFDSmQsS0FBTSxXQUVSOEosU0FDRWpKLElBQUksRUFDSkMsSUFBSSxFQUNKZCxLQUFNLFdBSU5FLEVBQWVOLEVBQU9nSyxNQUUxQnBMLEdBQVdZLElBQUksaUJBQWtCLFNBQVVDLEVBQU9vQixHQUNoREEsRUFBU1AsRUFBYVcsTUFHeEJyQyxFQUFXWSxJQUFJLGlCQUFrQixTQUFVQyxFQUFPb0IsR0FDaERBLEVBQVNQLEVBQWFZLE1BR3hCWCxLQUFLckIsT0FBUyxXQUNab0IsRUFBZU4sRUFBT00sRUFBYUYsTUFFbkN4QixFQUFXK0IsV0FBVyxTQUFVTCxFQUFhVyxJQUM3Q3JDLEVBQVcrQixXQUFXLFNBQVVMLEVBQWFZLEtBRy9DWCxLQUFLUixLQUFPLGFBOUNkK0osRUFBbUJuSyxTQUFXLGdCQU85Qm9LLEVBQWFwSyxTQUFXLGtCQTJDeEJxQixFQUFlckIsU0FBVyxhQUMxQixJQUFJNUIsR0FBU0MsUUFBUUQsT0FBTyxjQUU1QkEsR0FBT29NLE9BQU9MLEdBQ2QvTCxFQUFPK0MsSUFBSWlKLEdBQ1hoTSxFQUFPZ0QsUUFBUSxpQkFBa0JDIiwiZmlsZSI6IncxMWstc2xpZGVzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbCwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCd3MTFrLnNsaWRlcycsIFtdKTtcblxuICBtb2R1bGUuY29uc3RhbnQoJ3NsaWRlc0NvbmZpZycsIHtcbiAgICBzbGlkZXM6IFtdLFxuICAgIHNsaWRlVGVtcGxhdGVQcmVmaXg6ICdzbGlkZXMvY29udGVudC8nLFxuICAgIHNsaWRlVGVtcGxhdGVTdWZmaXg6ICcuaHRtbCcsXG4gICAgbWFzdGVyczoge30sXG4gICAgZm9vdGVyOiB7XG4gICAgICB0ZW1wbGF0ZVVybDogJ2Zvb3Rlci9mb290ZXIuaHRtbCcsXG4gICAgICBsZWZ0OiAnJyxcbiAgICAgIG1pZGRsZTogJycsXG4gICAgICByaWdodDogJyRpbmRleCArIDEnXG4gICAgfVxuICB9KTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gdzExa0V2ZW50VG9nZ2xlKCRyb290U2NvcGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwganFFbGVtZW50LCBhdHRycykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IGpxRWxlbWVudFswXTtcbiAgICAgICAgdmFyIG9yaWdpbmFsRGlzcGxheTtcbiAgICAgICAgc2NvcGUuJG9uKGF0dHJzLncxMWtFdmVudFRvZ2dsZSwgZnVuY3Rpb24gKGV2ZW50LCB2aXNpYmxlKSB7XG4gICAgICAgICAgdG9nZ2xlKHZpc2libGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB0b2dnbGUodmlzaWJsZSkge1xuICAgICAgICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBvcmlnaW5hbERpc3BsYXk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3JpZ2luYWxEaXNwbGF5ID0gZWxlbWVudC5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRyb290U2NvcGUuJGVtaXQoYXR0cnMudzExa0V2ZW50VG9nZ2xlICsgJy1jdXJyZW50JywgZnVuY3Rpb24odmlzaWJsZSkge1xuICAgICAgICAgIHRvZ2dsZSh2aXNpYmxlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICB3MTFrRXZlbnRUb2dnbGUuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuXG4gIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgndzExay5zbGlkZXMnKTtcbiAgbW9kdWxlLmRpcmVjdGl2ZSgndzExa0V2ZW50VG9nZ2xlJywgdzExa0V2ZW50VG9nZ2xlKTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gaW5pdExhbmd1YWdlKExhbmd1YWdlKSB7XG4gICAgTGFuZ3VhZ2UuaW5pdCgpO1xuICB9XG4gIGluaXRMYW5ndWFnZS4kaW5qZWN0ID0gWydMYW5ndWFnZSddO1xuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBMYW5ndWFnZSgkcm9vdFNjb3BlKSB7XG4gICAgdmFyIHN0YXRlcyA9IHtcbiAgICAgICdkZSc6IHtcbiAgICAgICAgZGU6IHRydWUsXG4gICAgICAgIGVuOiBmYWxzZSxcbiAgICAgICAgbmFtZTogJ2RlJyxcbiAgICAgICAgbmV4dDogJ2VuT25seSdcbiAgICAgIH0sXG4gICAgICAnZW4nOiB7XG4gICAgICAgIGRlOiBmYWxzZSxcbiAgICAgICAgZW46IHRydWUsXG4gICAgICAgIG5hbWU6ICdlbicsXG4gICAgICAgIG5leHQ6ICdkZStlbidcbiAgICAgIH0sXG4gICAgICAnZGUrZW4nOiB7XG4gICAgICAgIGRlOiB0cnVlLFxuICAgICAgICBlbjogdHJ1ZSxcbiAgICAgICAgbmFtZTogJ2RlK2VuJyxcbiAgICAgICAgbmV4dDogJ2RlJ1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgY3VycmVudFN0YXRlID0gc3RhdGVzLmRlO1xuXG4gICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnNldChjdXJyZW50U3RhdGUubmV4dCk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIGN1cnJlbnRTdGF0ZSA9IHN0YXRlc1tzdGF0ZV07XG5cbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnbGFuZy1kZScsIGN1cnJlbnRTdGF0ZS5kZSk7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2xhbmctZW4nLCBjdXJyZW50U3RhdGUuZW4pO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGN1cnJlbnRTdGF0ZS5uYW1lO1xuICAgIH0uYmluZCh0aGlzKTtcblxuICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICRyb290U2NvcGUuJG9uKCdsYW5nLWRlLWN1cnJlbnQnLCBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKGN1cnJlbnRTdGF0ZS5kZSk7XG4gICAgICB9KTtcblxuICAgICAgJHJvb3RTY29wZS4kb24oJ2xhbmctZW4tY3VycmVudCcsIGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soY3VycmVudFN0YXRlLmVuKTtcbiAgICAgIH0pO1xuICAgIH0uYmluZCh0aGlzKTtcbiAgfVxuICBMYW5ndWFnZS4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJ107XG5cbiAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCd3MTFrLnNsaWRlcycpO1xuICBtb2R1bGUucnVuKGluaXRMYW5ndWFnZSk7XG4gIG1vZHVsZS5zZXJ2aWNlKCdMYW5ndWFnZScsIExhbmd1YWdlKTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gU291cmNlU25pcHBldHMoJHJvb3RTY29wZSkge1xuICAgIHZhciBzdGF0ZXMgPSB7XG4gICAgICAnanMnOiB7XG4gICAgICAgIGpzOiB0cnVlLFxuICAgICAgICB0czogZmFsc2UsXG4gICAgICAgIG5hbWU6ICdqcycsXG4gICAgICAgIG5leHQ6ICd0c09ubHknXG4gICAgICB9LFxuICAgICAgJ3RzJzoge1xuICAgICAgICBqczogZmFsc2UsXG4gICAgICAgIHRzOiB0cnVlLFxuICAgICAgICBuYW1lOiAndHMnLFxuICAgICAgICBuZXh0OiAnanMrdHMnXG4gICAgICB9LFxuICAgICAgJ2pzK3RzJzoge1xuICAgICAgICBqczogdHJ1ZSxcbiAgICAgICAgdHM6IHRydWUsXG4gICAgICAgIG5hbWU6ICdqcyt0cycsXG4gICAgICAgIG5leHQ6ICdqcydcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHN0YXRlcy5qcztcblxuICAgICRyb290U2NvcGUuJG9uKCdzcmMtanMtY3VycmVudCcsIGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKGN1cnJlbnRTdGF0ZS5qcyk7XG4gICAgfSk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignc3JjLXRzLWN1cnJlbnQnLCBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayhjdXJyZW50U3RhdGUudHMpO1xuICAgIH0pO1xuXG4gICAgdGhpcy50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjdXJyZW50U3RhdGUgPSBzdGF0ZXNbY3VycmVudFN0YXRlLm5leHRdO1xuXG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3NyYy1qcycsIGN1cnJlbnRTdGF0ZS5qcyk7XG4gICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3NyYy10cycsIGN1cnJlbnRTdGF0ZS50cyk7XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIGN1cnJlbnRTdGF0ZSA9IHN0YXRlc1tzdGF0ZV07XG5cbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnc3JjLWpzJywgY3VycmVudFN0YXRlLmpzKTtcbiAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnc3JjLXRzJywgY3VycmVudFN0YXRlLnRzKTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjdXJyZW50U3RhdGUubmFtZTtcbiAgICB9LmJpbmQodGhpcyk7XG4gIH1cbiAgU291cmNlU25pcHBldHMuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuXG4gIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgndzExay5zbGlkZXMnKTtcbiAgbW9kdWxlLnNlcnZpY2UoJ1NvdXJjZVNuaXBwZXRzJywgU291cmNlU25pcHBldHMpO1xufSgpKTtcblxuIiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHcxMWtGb290ZXIoc2xpZGVzQ29uZmlnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgdGVtcGxhdGVVcmw6IHNsaWRlc0NvbmZpZy5mb290ZXIudGVtcGxhdGVVcmwgfHzCoCdmb290ZXIvZm9vdGVyLnRwbC5odG1sJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIHZhciBsZWZ0ID0gZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyLWxlZnQnKTtcbiAgICAgICAgdmFyIG1pZGRsZSA9IGVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLmZvb3Rlci1taWRkbGUnKTtcbiAgICAgICAgdmFyIHJpZ2h0ID0gZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuZm9vdGVyLXJpZ2h0Jyk7XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Q29udGVudChlbGVtZW50LCBleHByZXNzaW9uKSB7XG4gICAgICAgICAgdmFyIGNvbnRlbnQgPSBzY29wZS4kZXZhbChleHByZXNzaW9uKTtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoY29udGVudCkpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gY29udGVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzZXRDb250ZW50KGxlZnQsIGF0dHJzLmxlZnQgfHzCoHNsaWRlc0NvbmZpZy5mb290ZXIubGVmdCk7XG4gICAgICAgIHNldENvbnRlbnQobWlkZGxlLCBhdHRycy5taWRkbGUgfHzCoHNsaWRlc0NvbmZpZy5mb290ZXIubWlkZGxlKTtcbiAgICAgICAgc2V0Q29udGVudChyaWdodCwgYXR0cnMucmlnaHQgfHzCoHNsaWRlc0NvbmZpZy5mb290ZXIucmlnaHQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgdzExa0Zvb3Rlci4kaW5qZWN0ID0gWydzbGlkZXNDb25maWcnXTtcblxuICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3cxMWsuc2xpZGVzJyk7XG4gIG1vZHVsZS5kaXJlY3RpdmUoJ3cxMWtGb290ZXInLCB3MTFrRm9vdGVyKTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIHcxMWtQcmV0dHlQcmludCgkd2luZG93KSB7XG5cbiAgICB2YXIgZXNjYXBlSFRNTCA9IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZChodG1sKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBodG1sLnJlcGxhY2UoLz4vZywgJyZndDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvXCIvZywgJyZxdW90OycpO1xuICAgIH07XG5cbiAgICB2YXIgY29udGFpbmVyVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cIncxMWstcHJldHR5LXByaW50XCI+PHByZSBjbGFzcz1cInByZXR0eXByaW50IGxpbmVudW1zXCI+PC9wcmU+PC9kaXY+JztcbiAgICB2YXIgdGl0bGVUZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwidGl0bGVcIj48L2Rpdj4nO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0RWxlbWVudCwgdEF0dHJzKSB7XG4gICAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oJHdpbmRvdy5wcmV0dHlQcmludE9uZSkpIHtcbiAgICAgICAgICB2YXIgaHRtbCA9IHRFbGVtZW50Lmh0bWwoKTtcbiAgICAgICAgICB2YXIgZXNjYXBlZEh0bWwgPSBlc2NhcGVIVE1MKGh0bWwpO1xuICAgICAgICAgIHZhciBwcmV0dGlmaWVkSHRtbCA9ICR3aW5kb3cucHJldHR5UHJpbnRPbmUoZXNjYXBlZEh0bWwsIHRBdHRycy5sYW5nLCB0cnVlKTtcblxuICAgICAgICAgIHZhciBjb250YWluZXIgPSBhbmd1bGFyLmVsZW1lbnQoY29udGFpbmVyVGVtcGxhdGUpO1xuICAgICAgICAgIHZhciBwcmVFbGVtZW50ID0gY29udGFpbmVyLmZpbmQoJ3ByZScpO1xuXG4gICAgICAgICAgcHJlRWxlbWVudC5odG1sKHByZXR0aWZpZWRIdG1sKTtcblxuICAgICAgICAgIHRFbGVtZW50LnJlcGxhY2VXaXRoKGNvbnRhaW5lcik7XG5cbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3RpdGxlJywgZnVuY3Rpb24gKHRpdGxlVGV4dCkge1xuICAgICAgICAgICAgICBpZiAodGl0bGVUZXh0ICE9PSB1bmRlZmluZWQgJiYgdGl0bGVUZXh0ICE9PSAnJykge1xuICAgICAgICAgICAgICAgIHZhciB0aXRsZUVsZW1lbnQgPSBhbmd1bGFyLmVsZW1lbnQodGl0bGVUZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgdGl0bGVFbGVtZW50Lmh0bWwodGl0bGVUZXh0KTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnByZXBlbmQodGl0bGVFbGVtZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfTtcbiAgfVxuICB3MTFrUHJldHR5UHJpbnQuJGluamVjdCA9IFsnJHdpbmRvdyddO1xuXG4gIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgndzExay5zbGlkZXMnKTtcbiAgbW9kdWxlLmRpcmVjdGl2ZSgndzExa1ByZXR0eVByaW50JywgdzExa1ByZXR0eVByaW50KTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gVW5sb2FkQ29uZmlybSgkd2luZG93KSB7XG4gICAgdmFyIGNvdW50ZXIgPSAwO1xuXG4gICAgdGhpcy5pbmNyZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvdW50ZXIrKztcbiAgICB9O1xuXG4gICAgdGhpcy5kZWNyZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvdW50ZXItLTtcbiAgICB9O1xuXG4gICAgJHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGNvdW50ZXIgPiAwKSB7XG4gICAgICAgIHZhciBoaW50ID0gJ0VzIHd1cmRlIG1pbmRlc3RlbnMgZWluIEJlaXNwaWVsIGdlw7ZmZm5ldC4gV2VubiBkaWUgU2VpdGUgbmV1IGdlbGFkZW4gd2lyZCwgbcO8c3NlbiBiZWltIGVybmV1dGVuIMOWZmZuZW4gYXVjaCBkaWUgQmVpc3BpZWxlIG5ldSBnZWxhZGVuIHdlcmRlbi4nO1xuICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGhpbnQ7XG4gICAgICAgIHJldHVybiBoaW50O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgVW5sb2FkQ29uZmlybS4kaW5qZWN0ID0gWyckd2luZG93J107XG5cbiAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCd3MTFrLnNsaWRlcycpO1xuICBtb2R1bGUuc2VydmljZSgnVW5sb2FkQ29uZmlybScsIFVubG9hZENvbmZpcm0pO1xufSgpKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiB3MTFrT3Blbk9uY2UoJHdpbmRvdywgVW5sb2FkQ29uZmlybSkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICB2YXIgbmFtZWRXaW5kb3c7XG5cbiAgICAgICAgZWxlbWVudC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciBub05hbWVkV2luZG93T3BlbiA9IG5hbWVkV2luZG93ID09PSB1bmRlZmluZWQgfHwgbmFtZWRXaW5kb3cgPT09IG51bGwgfHwgbmFtZWRXaW5kb3cuY2xvc2VkO1xuICAgICAgICAgIHZhciBsaW5rQXR0clNldCA9IGF0dHJzLmhyZWYgIT09IHVuZGVmaW5lZCAmJiBhdHRycy5ocmVmICE9PSBudWxsICYmIGF0dHJzLnRhcmdldCAhPT0gdW5kZWZpbmVkICYmIGF0dHJzLnRhcmdldCAhPT0gbnVsbDtcbiAgICAgICAgICB2YXIgb3Blbk9uY2VTZXQgPSBhdHRycy53MTFrT3Blbk9uY2UgPT09ICd0cnVlJztcblxuICAgICAgICAgIGlmIChub05hbWVkV2luZG93T3BlbiAmJiBsaW5rQXR0clNldCAmJiBvcGVuT25jZVNldCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcygnZXhhbXBsZS1zaG93bicpO1xuICAgICAgICAgICAgVW5sb2FkQ29uZmlybS5pbmNyZW1lbnQoKTtcbiAgICAgICAgICAgIG5hbWVkV2luZG93ID0gJHdpbmRvdy5vcGVuKGF0dHJzLmhyZWYsIGF0dHJzLnRhcmdldCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAobm9OYW1lZFdpbmRvd09wZW4gPT09IGZhbHNlICYmIG9wZW5PbmNlU2V0KSB7XG4gICAgICAgICAgICBuYW1lZFdpbmRvdy5mb2N1cygpO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnZXhhbXBsZS1zaG93bicpO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgdzExa09wZW5PbmNlLiRpbmplY3QgPSBbJyR3aW5kb3cnLCAnVW5sb2FkQ29uZmlybSddO1xuXG4gIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgndzExay5zbGlkZXMnKTtcbiAgbW9kdWxlLmRpcmVjdGl2ZSgndzExa09wZW5PbmNlJywgdzExa09wZW5PbmNlKTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIFNsaWRlc1NlcnZpY2Uoc2xpZGVzQ29uZmlnLCAkbG9jYXRpb24sICRyb290U2NvcGUpIHtcbiAgICB2YXIgYWN0aXZlU2xpZGU7XG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZUZpcnN0U2xpZGUoKSB7XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYWN0aXZlU2xpZGUpKSB7XG4gICAgICAgIGFjdGl2ZVNsaWRlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgYWN0aXZlU2xpZGUgPSBzbGlkZXNbMF07XG4gICAgICBhY3RpdmVTbGlkZS5hY3RpdmUgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciBzbGlkZXM7XG4gICAgdmFyIHNsaWRlc01hcCA9IHt9O1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc2xpZGVOYW1lID0gJGxvY2F0aW9uLnBhdGgoKTtcblxuICAgICAgaWYgKHNsaWRlTmFtZS5zdWJzdHJpbmcoMCwgMSkgPT09ICcvJykge1xuICAgICAgICBzbGlkZU5hbWUgPSBzbGlkZU5hbWUuc3Vic3RyaW5nKDEsIHNsaWRlTmFtZS5sZW5ndGgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2xpZGUgPSBzbGlkZXNNYXBbc2xpZGVOYW1lXTtcblxuICAgICAgaWYgKGFuZ3VsYXIuaXNEZWZpbmVkKHNsaWRlKSkge1xuICAgICAgICBzbGlkZS5hY3RpdmF0ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbWFwU2xpZGVzQ29uZmlnKCkge1xuICAgICAgdmFyIHByZWZpeCA9IHNsaWRlc0NvbmZpZy5zbGlkZVRlbXBsYXRlUHJlZml4IHx8ICdzbGlkZXMvY29udGVudC8nO1xuICAgICAgdmFyIHN1ZmZpeCA9IHNsaWRlc0NvbmZpZy5zbGlkZVRlbXBsYXRlU3VmZml4IHx8ICcuaHRtbCc7XG5cbiAgICAgIHNsaWRlcyA9IHNsaWRlc0NvbmZpZy5zbGlkZXMubWFwKGZ1bmN0aW9uIChzbGlkZSkge1xuICAgICAgICB2YXIgc2xpZGVPYmplY3QgPSB7XG4gICAgICAgICAgbmFtZTogc2xpZGUsXG4gICAgICAgICAgdGVtcGxhdGU6IHByZWZpeCArIHNsaWRlICsgc3VmZml4LFxuICAgICAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICAgICAgfTtcblxuICAgICAgICBzbGlkZU9iamVjdC5hY3RpdmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBhY3RpdmVTbGlkZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICBhY3RpdmVTbGlkZSA9IHRoaXM7XG5cbiAgICAgICAgICBzbGlkZU9iamVjdC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzbGlkZU9iamVjdDtcbiAgICAgIH0pO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IHNsaWRlc1tpXTtcbiAgICAgICAgdmFyIHByZXZpb3VzO1xuICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICBwcmV2aW91cyA9IHNsaWRlc1tpIC0gMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcHJldmlvdXMgPSBzbGlkZXNbc2xpZGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIGlmIChpICsgMSA8IHNsaWRlcy5sZW5ndGgpIHtcbiAgICAgICAgICBuZXh0ID0gc2xpZGVzW2kgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBuZXh0ID0gc2xpZGVzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5wcmV2aW91cyA9IHByZXZpb3VzO1xuICAgICAgICBlbGVtZW50Lm5leHQgPSBuZXh0O1xuXG4gICAgICAgIHNsaWRlc01hcFtlbGVtZW50Lm5hbWVdID0gZWxlbWVudDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtYXBTbGlkZXNDb25maWcoKTtcbiAgICBhY3RpdmF0ZUZpcnN0U2xpZGUoKTtcblxuICAgIHRoaXMuZ2V0QWN0aXZlU2xpZGUgPSBmdW5jdGlvbigpwqB7XG4gICAgICByZXR1cm4gYWN0aXZlU2xpZGU7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0U2xpZGVzID0gZnVuY3Rpb24oKcKge1xuICAgICAgcmV0dXJuIHNsaWRlcztcbiAgICB9O1xuXG4gICAgdGhpcy5uYXZpZ2F0ZVRvID0gZnVuY3Rpb24gKHNsaWRlTmFtZSkge1xuICAgICAgJGxvY2F0aW9uLnBhdGgoc2xpZGVOYW1lKTtcbiAgICB9O1xuXG4gICAgdGhpcy5uYXZpZ2F0ZVRvRmlyc3QgPSBmdW5jdGlvbigpwqB7XG4gICAgICAkbG9jYXRpb24ucGF0aChzbGlkZXNbMF0ubmFtZSk7XG4gICAgfTtcblxuICAgIHRoaXMubmF2aWdhdGVUb0xhc3QgPSBmdW5jdGlvbigpwqB7XG4gICAgICAkbG9jYXRpb24ucGF0aChzbGlkZXNbc2xpZGVzLmxlbmd0aCAtIDFdLm5hbWUpO1xuICAgIH07XG5cbiAgICB0aGlzLm5hdmlnYXRlVG9PdmVydmlldyA9IGZ1bmN0aW9uKCnCoHtcbiAgICAgICRsb2NhdGlvbi5wYXRoKHNsaWRlc1sxXS5uYW1lKTtcbiAgICB9O1xuXG4gICAgdGhpcy5uYXZpZ2F0ZVRvTmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBuZXh0ID0gdGhpcy5nZXRBY3RpdmVTbGlkZSgpLm5leHQ7XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQobmV4dCkpIHtcbiAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvKG5leHQubmFtZSk7XG4gICAgICB9XG4gICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5uYXZpZ2F0ZVRvUHJldmlvdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcHJldmlvdXMgPSB0aGlzLmdldEFjdGl2ZVNsaWRlKCkucHJldmlvdXM7XG4gICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQocHJldmlvdXMpKSB7XG4gICAgICAgIHRoaXMubmF2aWdhdGVUbyhwcmV2aW91cy5uYW1lKTtcbiAgICAgIH1cbiAgICB9LmJpbmQodGhpcyk7XG4gIH1cbiAgU2xpZGVzU2VydmljZS4kaW5qZWN0ID0gWydzbGlkZXNDb25maWcnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnXTtcblxuICAvKiBAbmdJbmplY3QgKi9cbiAgZnVuY3Rpb24gU2xpZGVzQ3RybChTbGlkZXNTZXJ2aWNlKSB7XG4gICAgdGhpcy5zbGlkZXMgPSBTbGlkZXNTZXJ2aWNlLmdldFNsaWRlcygpO1xuICB9XG4gIFNsaWRlc0N0cmwuJGluamVjdCA9IFsnU2xpZGVzU2VydmljZSddO1xuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiB3MTFrU2xpZGVNYXN0ZXJEaXJlY3RpdmUoc2xpZGVzQ29uZmlnKSB7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgIHZhciBsYXN0ID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgICBpZiAobGFzdCkge1xuICAgICAgICBkbyB7XG4gICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChsYXN0KTtcbiAgICAgICAgICBsYXN0ID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgICAgIH0gd2hpbGUgKGxhc3QpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRycykge1xuICAgICAgICB2YXIga2V5ID0gYXR0cnMudzExa1NsaWRlTWFzdGVyIHx8IGF0dHJzLm1hc3RlcjtcbiAgICAgICAgdmFyIHRlbXBsYXRlVXJsID0gc2xpZGVzQ29uZmlnLm1hc3RlcnNba2V5XTtcblxuICAgICAgICBpZiAoYW5ndWxhci5pc1VuZGVmaW5lZCh0ZW1wbGF0ZVVybCkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIE1hdGVyLVNsaWRlIGZvdW5kIGZvciBcIicgKyBrZXkgKyAnXCIuIFBsZWFzZSBjb25maWd1cmUgXCJzbGlkZXNDb25maWdcIiBwcm9wZXJseS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZVVybDtcbiAgICAgIH0sXG4gICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzLCBjdHJsLCB0cmFuc2NsdWRlKSB7XG4gICAgICAgIHZhciB0cmFuc2NsdXNpb25TY29wZTtcblxuICAgICAgICB0cmFuc2NsdWRlKGZ1bmN0aW9uIChjbG9uZSwgc2NvcGUpIHtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2xvbmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBwYXJ0ID0gY2xvbmVbaV07XG5cbiAgICAgICAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQgJiYgYW5ndWxhci5pc0Z1bmN0aW9uKHBhcnQuZ2V0QXR0cmlidXRlKSkge1xuICAgICAgICAgICAgICB2YXIgcGFydE5hbWUgPSBwYXJ0LmdldEF0dHJpYnV0ZSgndzExay1zbGlkZS1wYXJ0LXNvdXJjZScpO1xuXG4gICAgICAgICAgICAgIGlmIChwYXJ0TmFtZSAhPT0gdW5kZWZpbmVkICYmIHBhcnROYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdG9yID0gJ1t3MTFrLXNsaWRlLXBhcnQtdGFyZ2V0PVwiJyArIHBhcnROYW1lICsgJ1wiXSc7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGlFbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocGFydCwgY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoJ3cxMWstc2xpZGUtcGFydC10YXJnZXQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0cmFuc2NsdXNpb25TY29wZSA9IHNjb3BlO1xuICAgICAgICB9KTtcblxuICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRyYW5zY2x1c2lvblNjb3BlLiRkZXN0cm95KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgdzExa1NsaWRlTWFzdGVyRGlyZWN0aXZlLiRpbmplY3QgPSBbJ3NsaWRlc0NvbmZpZyddO1xuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiB3MTFrU2xpZGVzRGlyZWN0aXZlKCR3aW5kb3csICRkb2N1bWVudCwgU2xpZGVzU2VydmljZSwgc2xpZGVzQ29uZmlnLCAkaW5qZWN0b3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0ZW1wbGF0ZVVybDogc2xpZGVzQ29uZmlnLmRpcmVjdGl2ZVRlbXBsYXRlVXJsIHx8ICdzbGlkZXMvc2xpZGVzLmh0bWwnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwganFFbGVtZW50KSB7XG4gICAgICAgIHZhciBlbGVtZW50ID0ganFFbGVtZW50WzBdO1xuXG4gICAgICAgIHZhciBsb2NhbFN0b3JhZ2VNb2RlS2V5ID0gJ3cxMWstc2xpZGVzLm1vZGUnO1xuICAgICAgICB2YXIgbW9kZSA9ICdleHBvcnQnO1xuXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZU1vZGUoKSB7XG4gICAgICAgICAgaWYgKG1vZGUgPT09ICdleHBvcnQnKSB7XG4gICAgICAgICAgICBtb2RlID0gJ3NjcmVlbic7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKG1vZGUgPT09ICdzY3JlZW4nKSB7XG4gICAgICAgICAgICBtb2RlID0gJ2V4cG9ydCc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0TW9kZShtb2RlKTtcblxuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCgkd2luZG93LmxvY2FsU3RvcmFnZSkpIHtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlW2xvY2FsU3RvcmFnZU1vZGVLZXldID0gbW9kZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRNb2RlKG1vZGUpIHtcbiAgICAgICAgICBpZiAobW9kZSA9PT0gJ2V4cG9ydCcpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc2NyZWVuJyk7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2V4cG9ydCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChtb2RlID09PSAnc2NyZWVuJykge1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdleHBvcnQnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2NyZWVuJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlT3ZlcmxheSgpIHtcbiAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5vdmVybGF5JykuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBydW5EZWZhdWx0QWN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIGFjdGlvbjtcbiAgICAgICAgICB2YXIgYWN0aW9uVHlwZTtcblxuICAgICAgICAgIC8vIHJpZ2h0IG9yIHBhZ2UgZG93blxuICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzOSB8fCBldmVudC5rZXlDb2RlID09PSAzNCkge1xuICAgICAgICAgICAgYWN0aW9uID0gU2xpZGVzU2VydmljZS5uYXZpZ2F0ZVRvTmV4dDtcbiAgICAgICAgICAgIGFjdGlvblR5cGUgPSAnbmF2aWdhdGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBsZWZ0IG9yIHBhZ2UgdXBcbiAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSAzNyB8fCBldmVudC5rZXlDb2RlID09PSAzMykge1xuICAgICAgICAgICAgYWN0aW9uID0gU2xpZGVzU2VydmljZS5uYXZpZ2F0ZVRvUHJldmlvdXM7XG4gICAgICAgICAgICBhY3Rpb25UeXBlID0gJ25hdmlnYXRlJztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gcG9zIDFcbiAgICAgICAgICBlbHNlIGlmIChldmVudC5rZXlDb2RlID09PSAzNikge1xuICAgICAgICAgICAgYWN0aW9uID0gU2xpZGVzU2VydmljZS5uYXZpZ2F0ZVRvRmlyc3Q7XG4gICAgICAgICAgICBhY3Rpb25UeXBlID0gJ25hdmlnYXRlJztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gZW5kXG4gICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzUpIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IFNsaWRlc1NlcnZpY2UubmF2aWdhdGVUb0xhc3Q7XG4gICAgICAgICAgICBhY3Rpb25UeXBlID0gJ25hdmlnYXRlJztcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gb1xuICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDc5KSB7XG4gICAgICAgICAgICBhY3Rpb24gPSBTbGlkZXNTZXJ2aWNlLm5hdmlnYXRlVG9PdmVydmlldztcbiAgICAgICAgICAgIGFjdGlvblR5cGUgPSAnbmF2aWdhdGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBlXG4gICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNjkpIHtcbiAgICAgICAgICAgIGFjdGlvbiA9IHRvZ2dsZU1vZGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHAgb3IgcGVyaW9kXG4gICAgICAgICAgZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gODAgfHwgZXZlbnQua2V5Q29kZSA9PT0gMTkwKSB7XG4gICAgICAgICAgICBhY3Rpb24gPSB0b2dnbGVPdmVybGF5O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhY3Rpb24pIHtcbiAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGFjdGlvbigpO1xuICAgICAgICAgICAgICBpZiAoYWN0aW9uVHlwZSA9PT0gJ25hdmlnYXRlJykge1xuICAgICAgICAgICAgICAgICR3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCgkd2luZG93LmxvY2FsU3RvcmFnZSkpIHtcbiAgICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoJHdpbmRvdy5sb2NhbFN0b3JhZ2VbbG9jYWxTdG9yYWdlTW9kZUtleV0pKSB7XG4gICAgICAgICAgICBtb2RlID0gJHdpbmRvdy5sb2NhbFN0b3JhZ2VbbG9jYWxTdG9yYWdlTW9kZUtleV07XG4gICAgICAgICAgICBzZXRNb2RlKG1vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgICRkb2N1bWVudC5iaW5kKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cbiAgICAgICAgICBpZiAoZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuc2hpZnRLZXkgfHwgZXZlbnQubWV0YUtleSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciB0YWdOYW1lID0gZXZlbnQudGFyZ2V0LnRhZ05hbWU7XG4gICAgICAgICAgaWYgKHRhZ05hbWUgPT09ICdJTlBVVCcgfHwgdGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBldmVudC50YXJnZXQuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2xpZGVzQ29uZmlnLnNob3J0Y3V0cykge1xuICAgICAgICAgICAgdmFyIGN1c3RvbVNob3J0Y3V0ID0gc2xpZGVzQ29uZmlnLnNob3J0Y3V0c1tldmVudC5rZXlDb2RlXTtcbiAgICAgICAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oY3VzdG9tU2hvcnRjdXQpIHx8IGFuZ3VsYXIuaXNBcnJheShjdXN0b21TaG9ydGN1dCkpIHtcbiAgICAgICAgICAgICAgJGluamVjdG9yLmludm9rZShjdXN0b21TaG9ydGN1dCwgeyRldmVudDogZXZlbnR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBydW5EZWZhdWx0QWN0aW9uKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBydW5EZWZhdWx0QWN0aW9uKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgdzExa1NsaWRlc0RpcmVjdGl2ZS4kaW5qZWN0ID0gWyckd2luZG93JywgJyRkb2N1bWVudCcsICdTbGlkZXNTZXJ2aWNlJywgJ3NsaWRlc0NvbmZpZycsICckaW5qZWN0b3InXTtcblxuICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3cxMWsuc2xpZGVzJyk7XG4gIG1vZHVsZS5zZXJ2aWNlKCdTbGlkZXNTZXJ2aWNlJywgU2xpZGVzU2VydmljZSk7XG4gIG1vZHVsZS5jb250cm9sbGVyKCdTbGlkZXNDdHJsJywgU2xpZGVzQ3RybCk7XG4gIG1vZHVsZS5kaXJlY3RpdmUoJ3cxMWtTbGlkZU1hc3RlcicsIHcxMWtTbGlkZU1hc3RlckRpcmVjdGl2ZSk7XG4gIG1vZHVsZS5kaXJlY3RpdmUoJ3cxMWtTbGlkZXMnLCB3MTFrU2xpZGVzRGlyZWN0aXZlKTtcbn0oKSk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyZVNob3J0Y3V0cyhzbGlkZXNDb25maWcpIHtcbiAgICBzbGlkZXNDb25maWcuc2hvcnRjdXRzID0gc2xpZGVzQ29uZmlnLnNob3J0Y3V0cyB8fCB7fTtcblxuICAgIHNsaWRlc0NvbmZpZy5zaG9ydGN1dHNbJzc2J10gPSBbJ1NvdXJjZVNuaXBwZXRzJywgZnVuY3Rpb24gKFNvdXJjZVNuaXBwZXRzKSB7XG4gICAgICBTb3VyY2VTbmlwcGV0cy50b2dnbGUoKTtcbiAgICB9XTtcbiAgfVxuICBjb25maWd1cmVTaG9ydGN1dHMuJGluamVjdCA9IFsnc2xpZGVzQ29uZmlnJ107XG5cbiAgLyogQG5nSW5qZWN0ICovXG4gIGZ1bmN0aW9uIGluaXRTbmlwcGV0cyhTb3VyY2VTbmlwcGV0cykge1xuICAgIC8vIGp1c3QgZm9yIGVhZ2VyIGNyZWF0aW9uXG4gICAgU291cmNlU25pcHBldHMuaW5pdCgpO1xuICB9XG4gIGluaXRTbmlwcGV0cy4kaW5qZWN0ID0gWydTb3VyY2VTbmlwcGV0cyddO1xuXG4gIC8qIEBuZ0luamVjdCAqL1xuICBmdW5jdGlvbiBTb3VyY2VTbmlwcGV0cygkcm9vdFNjb3BlKSB7XG4gICAgdmFyIHN0YXRlcyA9IHtcbiAgICAgICdqc09ubHknOiB7XG4gICAgICAgIGpzOiB0cnVlLFxuICAgICAgICB0czogZmFsc2UsXG4gICAgICAgIG5leHQ6ICd0c09ubHknXG4gICAgICB9LFxuICAgICAgJ3RzT25seSc6IHtcbiAgICAgICAganM6IGZhbHNlLFxuICAgICAgICB0czogdHJ1ZSxcbiAgICAgICAgbmV4dDogJ2pzQW5kVHMnXG4gICAgICB9LFxuICAgICAgJ2pzQW5kVHMnOiB7XG4gICAgICAgIGpzOiB0cnVlLFxuICAgICAgICB0czogdHJ1ZSxcbiAgICAgICAgbmV4dDogJ2pzT25seSdcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHN0YXRlcy5qc09ubHk7XG5cbiAgICAkcm9vdFNjb3BlLiRvbignc3JjLWpzLWN1cnJlbnQnLCBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayhjdXJyZW50U3RhdGUuanMpO1xuICAgIH0pO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJ3NyYy10cy1jdXJyZW50JywgZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soY3VycmVudFN0YXRlLnRzKTtcbiAgICB9KTtcblxuICAgIHRoaXMudG9nZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgY3VycmVudFN0YXRlID0gc3RhdGVzW2N1cnJlbnRTdGF0ZS5uZXh0XTtcblxuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdzcmMtanMnLCBjdXJyZW50U3RhdGUuanMpO1xuICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdzcmMtdHMnLCBjdXJyZW50U3RhdGUudHMpO1xuICAgIH07XG5cbiAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBub3RoaW5nIHRvIGRvIGhlcmUgYXQgdGhlIG1vbWVudFxuICAgIH07XG4gIH1cbiAgU291cmNlU25pcHBldHMuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xuICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3cxMWsuc2xpZGVzJyk7XG5cbiAgbW9kdWxlLmNvbmZpZyhjb25maWd1cmVTaG9ydGN1dHMpO1xuICBtb2R1bGUucnVuKGluaXRTbmlwcGV0cyk7XG4gIG1vZHVsZS5zZXJ2aWNlKCdTb3VyY2VTbmlwcGV0cycsIFNvdXJjZVNuaXBwZXRzKTtcbn0oKSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
