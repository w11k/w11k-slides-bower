/**
 * w11k-slides - v0.3.0 - 2014-04-28
 * https://github.com/w11k/w11k-slides
 *
 * Copyright (c) 2014 WeigleWilczek GmbH
 */
"use strict";angular.module("w11k.slides",[]),angular.module("w11k.slides").service("UnloadConfirm",["$window",function(a){var b={counter:0,increment:function(){this.counter++},decrement:function(){this.counter--}},c=function(a){if(b.counter>0){var c="Es wurde mindestens ein Beispiel geöffnet. Wenn die Seite neu geladen wird, müssen beim erneuten Öffnen auch die Beispiele neu geladen werden.";return a.returnValue=c,c}return void a.preventDefault()};return a.onbeforeunload=c,b}]),angular.module("w11k.slides").directive("w11kOpenOnce",["$window","UnloadConfirm",function(a,b){return{restrict:"A",scope:{name:"@"},link:function(c,d,e){d.bind("click",function(f){var g=void 0===c.namedWindow||null===c.namedWindow||c.namedWindow.closed,h=void 0!==e.href&&null!==e.href&&void 0!==e.target&&null!==e.target,i=void 0!==e.openOnce&&null!==e.openOnce&&"true"===e.openOnce;g&&h&&i?(d.removeClass("example-shown"),b.increment(),c.namedWindow=a.open(e.href,e.target),f.preventDefault()):g===!1&&i&&(c.namedWindow.focus(),d.addClass("example-shown"),f.preventDefault())})}}}]),angular.module("w11k.slides").directive("w11kPrettyPrint",["$window",function(a){return{restrict:"A",link:function(b,c){angular.isFunction(a.prettyPrint)&&a.prettyPrint(angular.noop,c[0])}}}]),angular.module("w11k.slides").constant("slidesConfig",{slides:[]}),angular.module("w11k.slides").factory("SlidesService",["slidesConfig","$location","$rootScope",function(a,b,c){function d(){angular.isDefined(f)&&(f.active=!1),f=g[0],f.active=!0}function e(){var b=a.slideTemplatePrefix||"slides/content/",c=a.slideTemplateSuffix||".tpl.html";g=a.slides.map(function(a){var d={name:a,template:b+a+c,active:!1};return d.activate=function(){f.active=!1,f=this,d.active=!0},d});for(var d=0;d<g.length;d++){var e,i=g[d];e=d>0?g[d-1]:g[g.length-1];var j;j=d+1<g.length?g[d+1]:g[0],i.previous=e,i.next=j,h[i.name]=i}}var f,g,h={};return c.$on("$locationChangeSuccess",function(){var a=b.path();"/"===a.substring(0,1)&&(a=a.substring(1,a.length));var c=h[a];angular.isDefined(c)&&c.activate()}),e(),d(),{getActiveSlide:function(){return f},getSlides:function(){return g},navigateTo:function(a){b.path(a)},navigateToFirst:function(){b.path(g[0].name)},navigateToLast:function(){b.path(g[g.length-1].name)},navigateToOverview:function(){b.path(g[1].name)}}}]),angular.module("w11k.slides").controller("SlidesCtrl",["$scope","SlidesService",function(a,b){a.slides=b.getSlides()}]),angular.module("w11k.slides").directive("w11kSlides",["$location","$document","SlidesService","$rootScope","slidesConfig",function(a,b,c,d,e){return{restrict:"EA",templateUrl:e.directiveTemplateUrl||"slides/slides.tpl.html",replace:!0,link:function(a,e){var f=function(){var a=c.getActiveSlide().next;angular.isDefined(a)&&c.navigateTo(a.name)},g=function(){var a=c.getActiveSlide().previous;angular.isDefined(a)&&c.navigateTo(a.name)};b.bind("keydown",function(a){39===a.keyCode?d.$apply(function(){f()}):37===a.keyCode?d.$apply(function(){g()}):36===a.keyCode?d.$apply(function(){c.navigateToFirst()}):35===a.keyCode?d.$apply(function(){c.navigateToLast()}):79===a.keyCode?d.$apply(function(){c.navigateToOverview()}):69===a.keyCode&&d.$apply(function(){e.toggleClass("export"),e.toggleClass("screen")})})}}}]);