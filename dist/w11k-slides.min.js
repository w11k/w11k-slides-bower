/**
 * w11k-slides - v0.10.3 - 2015-05-13
 * https://github.com/w11k/w11k-slides
 *
 * Copyright (c) 2015 WeigleWilczek GmbH
 */
"use strict";angular.module("w11k.slides",[]),angular.module("w11k.slides").constant("slidesConfig",{slides:[],slideTemplatePrefix:"slides/content/",slideTemplateSuffix:".tpl.html",masters:{},footer:{templateUrl:"footer/footer.tpl.html",left:"",middle:"",right:"$index + 1"}}),angular.module("w11k.slides").directive("w11kFooter",["slidesConfig",function(a){return{restrict:"EA",templateUrl:a.footer.templateUrl||"footer/footer.tpl.html",replace:!0,link:function(b,c,d){function e(a,c){var d=b.$eval(c);angular.isDefined(d)&&(a.innerHTML=d)}var f=c[0].querySelector(".footer-left"),g=c[0].querySelector(".footer-middle"),h=c[0].querySelector(".footer-right");e(f,d.left||a.footer.left),e(g,d.middle||a.footer.middle),e(h,d.right||a.footer.right)}}}]),angular.module("w11k.slides").service("UnloadConfirm",["$window",function(a){var b={counter:0,increment:function(){this.counter++},decrement:function(){this.counter--}},c=function(a){if(b.counter>0){var c="Es wurde mindestens ein Beispiel geöffnet. Wenn die Seite neu geladen wird, müssen beim erneuten Öffnen auch die Beispiele neu geladen werden.";return a.returnValue=c,c}return void a.preventDefault()};return a.onbeforeunload=c,b}]),angular.module("w11k.slides").directive("w11kOpenOnce",["$window","UnloadConfirm",function(a,b){return{restrict:"A",link:function(c,d,e){var f;d.bind("click",function(c){var g=void 0===f||null===f||f.closed,h=void 0!==e.href&&null!==e.href&&void 0!==e.target&&null!==e.target,i="true"===e.w11kOpenOnce;g&&h&&i?(d.removeClass("example-shown"),b.increment(),f=a.open(e.href,e.target),c.preventDefault()):g===!1&&i&&(f.focus(),d.addClass("example-shown"),c.preventDefault())})}}}]),angular.module("w11k.slides").directive("w11kPrettyPrint",["$window","$document",function(a){var b=function(a){return angular.isUndefined(a)?void 0:a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},c='<div class="w11k-pretty-print"><pre class="prettyprint linenums"></pre></div>',d='<div class="title"></div>';return{restrict:"A",terminal:!0,compile:function(e,f){if(angular.isFunction(a.prettyPrintOne)){var g=e.html(),h=b(g),i=a.prettyPrintOne(h,f.lang,!0),j=angular.element(c),k=j.find("pre");return k.html(i),e.replaceWith(j),function(a,b,c){c.$observe("title",function(a){if(void 0!==a&&""!==a){var c=angular.element(d);c.html(a),b.prepend(c)}})}}}}}]),angular.module("w11k.slides").factory("SlidesService",["slidesConfig","$location","$rootScope",function(a,b,c){function d(){angular.isDefined(f)&&(f.active=!1),f=g[0],f.active=!0}function e(){var b=a.slideTemplatePrefix||"slides/content/",c=a.slideTemplateSuffix||".tpl.html";g=a.slides.map(function(a){var d={name:a,template:b+a+c,active:!1};return d.activate=function(){f.active=!1,f=this,d.active=!0},d});for(var d=0;d<g.length;d++){var e,i=g[d];e=d>0?g[d-1]:g[g.length-1];var j;j=d+1<g.length?g[d+1]:g[0],i.previous=e,i.next=j,h[i.name]=i}}var f,g,h={};return c.$on("$locationChangeSuccess",function(){var a=b.path();"/"===a.substring(0,1)&&(a=a.substring(1,a.length));var c=h[a];angular.isDefined(c)&&c.activate()}),e(),d(),{getActiveSlide:function(){return f},getSlides:function(){return g},navigateTo:function(a){b.path(a)},navigateToFirst:function(){b.path(g[0].name)},navigateToLast:function(){b.path(g[g.length-1].name)},navigateToOverview:function(){b.path(g[1].name)}}}]),angular.module("w11k.slides").controller("SlidesCtrl",["$scope","SlidesService",function(a,b){a.slides=b.getSlides()}]),angular.module("w11k.slides").directive("w11kSlideMaster",["slidesConfig",function(a){var b=function(a){var b=a.lastChild;if(b)do a.removeChild(b),b=a.lastChild;while(b)};return{templateUrl:function(b,c){var d=c.w11kSlideMaster||c.master,e=a.masters[d];if(angular.isUndefined(e))throw new Error('No Mater-Slide found for "'+d+'". Please configure "slidesConfig" properly.');return e},restrict:"EA",replace:!0,transclude:!0,link:function(a,c,d,e,f){var g;f(function(a,d){for(var e=0;e<a.length;e++){var f=a[e];if(void 0!==f&&angular.isFunction(f.getAttribute)){var h=f.getAttribute("w11k-slide-part-source");if(void 0!==h&&null!==h){var i='[w11k-slide-part-target="'+h+'"]',j=c[0].querySelector(i);null!==j&&(b(j),j.appendChild(f,j),j.removeAttribute("w11k-slide-part-target"))}}}g=d}),a.$on("$destroy",function(){g.$destroy()})}}}]),angular.module("w11k.slides").directive("w11kSlides",["$location","$window","$document","SlidesService","$rootScope","slidesConfig",function(a,b,c,d,e,f){return{restrict:"EA",templateUrl:f.directiveTemplateUrl||"slides/slides.tpl.html",replace:!0,link:function(a,f){function g(){"export"===m?m="screen":"screen"===m&&(m="export"),h(m),angular.isDefined(b.localStorage)&&(b.localStorage[l]=m)}function h(a){"export"===a?(f.removeClass("screen"),f.addClass("export")):"screen"===a&&(f.removeClass("export"),f.addClass("screen"))}function i(){f[0].querySelector("div.overlay").classList.toggle("active")}var j=function(){var a=d.getActiveSlide().next;angular.isDefined(a)&&d.navigateTo(a.name)},k=function(){var a=d.getActiveSlide().previous;angular.isDefined(a)&&d.navigateTo(a.name)},l="w11k-slides.mode",m="export";angular.isDefined(b.localStorage)&&angular.isDefined(b.localStorage[l])&&(m=b.localStorage[l],h(m)),c.bind("keydown",function(a){var c,f;a.altKey||a.ctrlKey||a.shiftKey||a.metaKey||(39===a.keyCode||34===a.keyCode?(c=j,f="navigate"):37===a.keyCode||33===a.keyCode?(c=k,f="navigate"):36===a.keyCode?(c=d.navigateToFirst,f="navigate"):35===a.keyCode?(c=d.navigateToLast,f="navigate"):79===a.keyCode?(c=d.navigateToOverview,f="navigate"):69===a.keyCode?c=g:(80===a.keyCode||190===a.keyCode)&&(c=i),c&&e.$apply(function(){c(),"navigate"===f&&b.scrollTo(0,0)}))})}}}]);