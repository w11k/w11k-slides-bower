/**
 * w11k-slides - v0.7.0 - 2014-08-27
 * https://github.com/w11k/w11k-slides
 *
 * Copyright (c) 2014 WeigleWilczek GmbH
 */
"use strict";angular.module("w11k.slides",[]),angular.module("w11k.slides").service("UnloadConfirm",["$window",function(a){var b={counter:0,increment:function(){this.counter++},decrement:function(){this.counter--}},c=function(a){if(b.counter>0){var c="Es wurde mindestens ein Beispiel geöffnet. Wenn die Seite neu geladen wird, müssen beim erneuten Öffnen auch die Beispiele neu geladen werden.";return a.returnValue=c,c}return void a.preventDefault()};return a.onbeforeunload=c,b}]),angular.module("w11k.slides").directive("w11kOpenOnce",["$window","UnloadConfirm",function(a,b){return{restrict:"A",link:function(c,d,e){var f;d.bind("click",function(c){var g=void 0===f||null===f||f.closed,h=void 0!==e.href&&null!==e.href&&void 0!==e.target&&null!==e.target,i="true"===e.w11kOpenOnce;g&&h&&i?(d.removeClass("example-shown"),b.increment(),f=a.open(e.href,e.target),c.preventDefault()):g===!1&&i&&(f.focus(),d.addClass("example-shown"),c.preventDefault())})}}}]),angular.module("w11k.slides").directive("w11kPrettyPrint",["$window","$document",function(a){var b=function(a){return angular.isUndefined(a)?void 0:a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},c='<div class="w11k-pretty-print"><pre class="prettyprint linenums"></pre></div>',d='<div class="title"></div>';return{restrict:"A",terminal:!0,compile:function(e,f){if(angular.isFunction(a.prettyPrintOne)){var g=e.html(),h=b(g),i=a.prettyPrintOne(h,f.lang,!0),j=angular.element(c),k=j.find("pre");return k.html(i),e.replaceWith(j),function(a,b,c){c.$observe("title",function(a){if(void 0!==a&&""!==a){var b=angular.element(d);b.html(a),j.prepend(b)}})}}}}}]),angular.module("w11k.slides").constant("slidesConfig",{slides:[]}),angular.module("w11k.slides").factory("SlidesService",["slidesConfig","$location","$rootScope",function(a,b,c){function d(){angular.isDefined(f)&&(f.active=!1),f=g[0],f.active=!0}function e(){var b=a.slideTemplatePrefix||"slides/content/",c=a.slideTemplateSuffix||".tpl.html";g=a.slides.map(function(a){var d={name:a,template:b+a+c,active:!1};return d.activate=function(){f.active=!1,f=this,d.active=!0},d});for(var d=0;d<g.length;d++){var e,i=g[d];e=d>0?g[d-1]:g[g.length-1];var j;j=d+1<g.length?g[d+1]:g[0],i.previous=e,i.next=j,h[i.name]=i}}var f,g,h={};return c.$on("$locationChangeSuccess",function(){var a=b.path();"/"===a.substring(0,1)&&(a=a.substring(1,a.length));var c=h[a];angular.isDefined(c)&&c.activate()}),e(),d(),{getActiveSlide:function(){return f},getSlides:function(){return g},navigateTo:function(a){b.path(a)},navigateToFirst:function(){b.path(g[0].name)},navigateToLast:function(){b.path(g[g.length-1].name)},navigateToOverview:function(){b.path(g[1].name)}}}]),angular.module("w11k.slides").controller("SlidesCtrl",["$scope","SlidesService",function(a,b){a.slides=b.getSlides()}]),angular.module("w11k.slides").directive("w11kSlides",["$location","$window","$document","SlidesService","$rootScope","slidesConfig",function(a,b,c,d,e,f){return{restrict:"EA",templateUrl:f.directiveTemplateUrl||"slides/slides.tpl.html",replace:!0,link:function(a,f){function g(){"export"===l?l="screen":"screen"===l&&(l="export"),h(l),angular.isDefined(b.localStorage)&&(b.localStorage[k]=l)}function h(a){"export"===a?(f.removeClass("screen"),f.addClass("export")):"screen"===a&&(f.removeClass("export"),f.addClass("screen"))}var i=function(){var a=d.getActiveSlide().next;angular.isDefined(a)&&d.navigateTo(a.name)},j=function(){var a=d.getActiveSlide().previous;angular.isDefined(a)&&d.navigateTo(a.name)},k="w11k-slides.mode",l="export";angular.isDefined(b.localStorage)&&angular.isDefined(b.localStorage[k])&&(l=b.localStorage[k],h(l)),c.bind("keydown",function(a){39===a.keyCode?e.$apply(function(){i()}):37===a.keyCode?e.$apply(function(){j()}):36===a.keyCode?e.$apply(function(){d.navigateToFirst()}):35===a.keyCode?e.$apply(function(){d.navigateToLast()}):79===a.keyCode?e.$apply(function(){d.navigateToOverview()}):69===a.keyCode&&e.$apply(function(){g()})})}}}]);